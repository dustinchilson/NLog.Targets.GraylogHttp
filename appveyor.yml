configuration: Release
platform: Any CPU
image: Visual Studio 2017

init:
  # Set "build version number" to "short-commit-hash" or when tagged to "tag name" (Travis style)
  - ps: >-
      if ($env:APPVEYOR_REPO_TAG -eq "true")
      {
        Update-AppveyorBuild -Version "$env:APPVEYOR_REPO_TAG_NAME"
      }
      else
      {
        Update-AppveyorBuild -Version "dev-$($env:APPVEYOR_REPO_COMMIT.substring(0,7))"
      }

before_build:
  nuget restore NLog.Targets.GraylogHttp.sln

build:
  project: NLog.Targets.GraylogHttp.sln
  publish_nuget: true
  publish_nuget_symbols: true
  parallel: true
  verbosity: minimal

deploy:
- provider: NuGet
  on:
    branch: master
  api_key:
    secure: OevGaxGEhut0e3EXmzfBfihKqCn5J2Y/Og4ggvxI6I6fP5wvSwdwOjMLtreve7NN